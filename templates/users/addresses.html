{% extends 'base.html' %}

{% block title %}My Addresses - JigsimurHerbal{% endblock %}

{% block content %}
<div class="container my-5">
  <div class="row">
    <div class="col-md-3">
      <!-- Sidebar Navigation -->
      <div class="card">
        <div class="card-header bg-success text-white">
          <h5 class="mb-0"><i class="fas fa-user"></i> Account Menu</h5>
        </div>
        <div class="list-group list-group-flush">
          <a href="{% url 'users:profile' %}" class="list-group-item list-group-item-action">
            <i class="fas fa-user-circle"></i> Profile Overview
          </a>
          <a href="{% url 'users:edit_profile' %}" class="list-group-item list-group-item-action">
            <i class="fas fa-edit"></i> Edit Profile
          </a>
          <a href="{% url 'users:addresses' %}" class="list-group-item list-group-item-action active">
            <i class="fas fa-map-marker-alt"></i> Addresses
          </a>
          <a href="{% url 'users:order_history' %}" class="list-group-item list-group-item-action">
            <i class="fas fa-shopping-bag"></i> Order History
          </a>
        </div>
      </div>
    </div>

    <div class="col-md-9">
      <div class="card">
        <div class="card-header bg-success text-white d-flex justify-content-between align-items-center">
          <h4 class="mb-0"><i class="fas fa-map-marker-alt"></i> My Addresses</h4>
          <a href="{% url 'users:add_address' %}" class="btn btn-light btn-sm">
            <i class="fas fa-plus"></i> Add New Address
          </a>
        </div>
        <div class="card-body">
          {% if addresses %}
          <div class="row">
            {% for address in addresses %}
            <div class="col-md-6 mb-4">
              <div class="card h-100 {% if address.is_default %}border-success{% endif %}">
                <div class="card-header {% if address.is_default %}bg-success text-white{% else %}bg-light{% endif %}">
                  <h6 class="mb-0">
                    <i class="fas fa-{% if address.type == 'billing' %}credit-card{% else %}truck{% endif %}"></i>
                    {{ address.get_type_display }}
                    {% if address.is_default %}
                    <span class="badge bg-warning text-dark ms-2">Default</span>
                    {% endif %}
                  </h6>
                </div>
                <div class="card-body">
                  <h6>{{ address.first_name }} {{ address.last_name }}</h6>
                  {% if address.company %}
                  <p class="text-muted small mb-1">{{ address.company }}</p>
                  {% endif %}
                  <address class="mb-2">
                    {{ address.address_line_1 }}<br>
                    {% if address.address_line_2 %}
                    {{ address.address_line_2 }}<br>
                    {% endif %}
                    {{ address.city }}, {{ address.state }} {{ address.postal_code }}<br>
                    {{ address.country }}
                  </address>
                  {% if address.phone %}
                  <p class="text-muted small">
                    <i class="fas fa-phone"></i> {{ address.phone }}
                  </p>
                  {% endif %}
                </div>
                <div class="card-footer bg-transparent">
                  <div class="btn-group w-100" role="group">
                    <a href="{% url 'users:edit_address' address_id=address.id %}"
                      class="btn btn-outline-success btn-sm">
                      <i class="fas fa-edit"></i> Edit
                    </a>
                    <a href="{% url 'users:delete_address' address_id=address.id %}"
                      class="btn btn-outline-danger btn-sm"
                      onclick="return confirm('Are you sure you want to delete this address?')">
                      <i class="fas fa-trash"></i> Delete
                    </a>
                  </div>
                </div>
              </div>
            </div>
            {% endfor %}
          </div>
          {% else %}
          <div class="text-center py-5">
            <i class="fas fa-map-marker-alt fa-3x text-muted mb-3"></i>
            <h5>No Addresses Found</h5>
            <p class="text-muted">You haven't added any addresses yet.</p>
            <a href="{% url 'users:add_address' %}" class="btn btn-success">
              <i class="fas fa-plus"></i> Add Your First Address
            </a>
          </div>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
